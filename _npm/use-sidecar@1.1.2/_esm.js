/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/use-sidecar@1.1.2/dist/es2015/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{__assign as r,__rest as n}from"../tslib@2.7.0/_esm.js";import*as e from"../react@16.14.0/_esm.js";import{useState as t,useEffect as o,useCallback as u,useLayoutEffect as i}from"../react@16.14.0/_esm.js";import{isNode as c}from"../detect-node-es@1.1.0/_esm.js";var a={isNode:c,forceCache:!1},f=new WeakMap,s={};function d(r,n){var e=n&&n.options||s;return a.isNode&&!e.ssr?[null,null]:function(r,n){var e=n&&n.options||s,u=a.isNode&&!!e.ssr||!e.async,i=t(u?function(){return f.get(r)}:void 0),c=i[0],d=i[1],l=t(null),m=l[0],p=l[1];return o((function(){c||r().then((function(e){var t,o=n?n.read():e.default||e;if(!o)throw console.error("Sidecar error: with importer",r),n?(console.error("Sidecar error: with medium",n),t=new Error("Sidecar medium was not found")):t=new Error("Sidecar was not found in exports"),p((function(){return t})),t;f.set(r,o),d((function(){return o}))}),(function(r){return p((function(){return r}))}))}),[]),[c,m]}(r,n)}function l(n,t){var o=function(){return t};return function(u){var i=d(n,u.sideCar),c=i[0];return i[1]&&t?o:c?e.createElement(c,r({},u)):null}}var m={onError:function(r){return console.error(r)}},p=function(r){Object.assign(m,r)};function v(r){return r}function h(r,n){void 0===n&&(n=v);var e=[],t=!1;return{read:function(){if(t)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return e.length?e[e.length-1]:r},useMedium:function(r){var o=n(r,t);return e.push(o),function(){e=e.filter((function(r){return r!==o}))}},assignSyncMedium:function(r){for(t=!0;e.length;){var n=e;e=[],n.forEach(r)}e={push:function(n){return r(n)},filter:function(){return e}}},assignMedium:function(r){t=!0;var n=[];if(e.length){var o=e;e=[],o.forEach(r),n=e}var u=function(){var e=n;n=[],e.forEach(r)},i=function(){return Promise.resolve().then(u)};i(),e={push:function(r){n.push(r),i()},filter:function(r){return n=n.filter(r),e}}}}}function E(r,n){return void 0===n&&(n=v),h(r,n)}function w(n){void 0===n&&(n={});var e=h(null);return e.options=r({async:!0,ssr:!1},n),e}function g(n,c){function a(t){var o=t.stateRef,c=t.props,a=u((function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return i((function(){o.current(r)})),null}),[]);return e.createElement(n,r({},c,{children:a}))}var f=e.memo((function(r){var n=r.stateRef,e=r.defaultState,u=r.children,i=t(e.current),c=i[0],a=i[1];return o((function(){n.current=a}),[]),u.apply(void 0,c)}),(function(){return!0}));return function(r){var n=e.useRef(c(r)),t=e.useRef((function(r){return n.current=r}));return e.createElement(e.Fragment,null,e.createElement(a,{stateRef:t,props:r}),e.createElement(f,{stateRef:t,defaultState:n,children:r.children}))}}var S=function(t){var o=t.sideCar,u=n(t,["sideCar"]);if(!o)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=o.read();if(!i)throw new Error("Sidecar medium not found");return e.createElement(i,r({},u))};function y(r,n){return r.useMedium(n),S}S.isSideCarExport=!0;export{E as createMedium,w as createSidecarMedium,y as exportSidecar,g as renderCar,p as setConfig,l as sidecar,d as useSidecar};export default null;
